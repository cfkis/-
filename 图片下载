/**
 * 根据图片 URL 下载图片
 * @param imgsrc 图片 url
 * @param type 图片类型 (png/jpg/webp)
 * @param name 下载图片命名
 * @author chifuk
 * @returns
 */
 function downloadImg(imgsrc, type, name) {
    let image = new Image()
    image.setAttribute('crossOrigin', 'anonymous')
    image.src = imgsrc
    image.onload = function() {
        let canvas = document.createElement('canvas')
        canvas.width = image.width
        canvas.height = image.height
        let context = canvas.getContext('2d')
        context.drawImage(image, 0, 0, image.width, image.height)
        
        let url = canvas.toDataURL('image/' + type)
        let a = document.createElement('a')
        let event = new MouseEvent('click')
        a.download = name || 'name'
        a.href = url
        a.dispatchEvent(event)
    }
 }
